{
  "repositories": {
    "my-backend": {
      "path": "/home/YOUR_USER/src/my-backend",
      "gitlab": "your-org/my-backend",
      "jira_project": "PROJ",
      "jira_component": "My Component",
      "lint_command": "make lint",
      "test_command": "make test",
      "test_setup": "# Setup instructions for local testing\n# 1. Start services: podman-compose up -d\n# 2. Run migrations: make migrate\n# 3. Run tests: make test",
      "default_branch": "main",
      "konflux_namespace": "your-tenant",
      "fastapi_container": "my-backend-api-1",
      "scopes": ["api", "auth", "db"]
    },
    "my-frontend": {
      "path": "/home/YOUR_USER/src/my-frontend",
      "gitlab": "your-org/my-frontend",
      "jira_project": "PROJ",
      "jira_component": "My Component",
      "lint_command": "npm run lint",
      "test_command": "npm test",
      "default_branch": "main",
      "scopes": ["ui", "components"]
    }
  },
  "user": {
    "username": "YOUR_USERNAME",
    "email": "you@example.com",
    "full_name": "Your Name",
    "gitlab_username": "YOUR_USERNAME",
    "jira_username": "YOUR_USERNAME",
    "timezone": "Europe/Dublin"
  },
  "commit_format": {
    "pattern": "{issue_key} - {type}({scope}): {description}",
    "types": ["feat", "fix", "refactor", "docs", "test", "chore", "style", "perf"],
    "examples": [
      "PROJ-12345 - feat(api): Add new endpoint",
      "PROJ-12345 - fix(auth): Handle token expiry"
    ]
  },
  "jira": {
    "url": "https://your-jira-instance.atlassian.net",
    "default_project": "PROJ",
    "cli": "jira",
    "statuses": {
      "done": "Done",
      "pending_release": "Pending Release",
      "new": "New",
      "refinement": "Refinement",
      "in_progress": "In Progress"
    },
    "billing_events": {
      "summary_pattern": "BillingEvent {number:05d} - {description}",
      "search_jql": "project = PROJ AND summary ~ 'BillingEvent' ORDER BY created DESC",
      "labels": ["billing", "alert", "auto-created"],
      "component": "My Component"
    },
    "alert_issues": {
      "summary_pattern": "Alert: {alert_name} - {description}",
      "search_jql": "project = PROJ AND summary ~ 'Alert:' AND labels = 'prometheus-alert' ORDER BY created DESC",
      "labels": ["prometheus-alert", "auto-created"],
      "component": "My Component"
    }
  },
  "gitlab": {
    "host": "gitlab.com"
  },
  "quay": {
    "api_url": "https://quay.io/api/v1",
    "default_namespace": "your-namespace",
    "repositories": {
      "my-backend": "your-org/my-backend"
    }
  },
  "konflux": {
    "kubeconfig": "/home/YOUR_USER/.kube/config.konflux",
    "cluster": "your-konflux-cluster.example.com"
  },
  "namespaces": {
    "stage": {
      "main": "your-app-stage",
      "kubeconfig": "/home/YOUR_USER/.kube/config.s"
    },
    "production": {
      "main": "your-app-prod",
      "billing": "your-app-prod-billing",
      "kubeconfig": "/home/YOUR_USER/.kube/config.p"
    }
  },
  "app_interface": {
    "repo": "app-interface",
    "path": "/home/YOUR_USER/src/app-interface",
    "deploy_file": "data/services/your-org/your-app/cicd/deploy-clowder.yml",
    "saas_namespaces": "data/services/your-org/your-app/namespaces",
    "namespace_files": {
      "prod_main": "your-app-prod.yml",
      "prod_billing": "your-app-prod-billing.yml",
      "stage": "your-app-stage.yml"
    },
    "alerts": {
      "stage": "resources/your-stage/your-app-stage",
      "prod_main": "resources/your-prod/your-app-prod"
    }
  },
  "prometheus": {
    "environments": {
      "stage": {
        "url": "https://prometheus.stage.example.com",
        "kubeconfig": "/home/YOUR_USER/.kube/config.s",
        "namespace": "your-app-stage"
      },
      "production": {
        "url": "https://prometheus.prod.example.com",
        "kubeconfig": "/home/YOUR_USER/.kube/config.p",
        "namespace": "your-app-prod"
      }
    }
  },
  "alertmanager": {
    "environments": {
      "stage": {
        "url": "https://alertmanager.stage.example.com",
        "kubeconfig": "/home/YOUR_USER/.kube/config.s"
      },
      "production": {
        "url": "https://alertmanager.prod.example.com",
        "kubeconfig": "/home/YOUR_USER/.kube/config.p"
      }
    }
  },
  "kibana": {
    "environments": {
      "stage": {
        "url": "https://kibana.stage.example.com",
        "kubeconfig": "/home/YOUR_USER/.kube/config.s",
        "index_pattern": "your-app-logs-*",
        "namespace": "your-app-stage"
      },
      "production": {
        "url": "https://kibana.prod.example.com",
        "kubeconfig": "/home/YOUR_USER/.kube/config.p",
        "index_pattern": "your-app-logs-*",
        "namespace": "your-app-prod"
      }
    }
  },
  "clusters": {
    "stage": {
      "name": "stage-cluster",
      "description": "Staging environment cluster",
      "console_url": "https://console.stage.example.com",
      "api_url": "https://api.stage.example.com:6443"
    },
    "production": {
      "name": "prod-cluster",
      "description": "Production environment cluster",
      "console_url": "https://console.prod.example.com",
      "api_url": "https://api.prod.example.com:6443"
    }
  },
  "kubernetes": {
    "auth_command": "oc login",
    "environments": {
      "production": {
        "cluster": "prod",
        "kubeconfig_pattern": "/home/YOUR_USER/.kube/config.p-{namespace}",
        "namespaces": ["your-app-prod"]
      },
      "stage": {
        "cluster": "stage",
        "kubeconfig_pattern": "/home/YOUR_USER/.kube/config.s-{namespace}",
        "namespaces": ["your-app-stage"]
      },
      "ephemeral": {
        "cluster": "eph",
        "kubeconfig_pattern": "/home/YOUR_USER/.kube/config.e-{namespace}",
        "namespace_pattern": "ephemeral-*"
      }
    }
  },
  "saas_pipelines": {
    "cluster": "your-saas-pipelines-cluster",
    "kubeconfig": "/home/YOUR_USER/.kube/config.ap",
    "description": "SaaS deployment pipelines",
    "namespaces": {
      "my-backend": "my-backend-saas"
    }
  },
  "bonfire": {
    "description": "Ephemeral namespace management",
    "ephemeral_cluster": "eph",
    "kubeconfig": "/home/YOUR_USER/.kube/config.e",
    "ref_env": "insights-production",
    "default_timeout": 900,
    "optional_deps_method": "hybrid",
    "frontends": false,
    "apps": {
      "my-app": {
        "description": "My application",
        "components": {
          "main": {
            "name": "my-app-clowdapp",
            "description": "Main component"
          }
        },
        "image_base": "quay.io/your-org/my-app",
        "namespace_prefix": "ephemeral-"
      }
    },
    "workflow": {
      "steps": [
        "1. Konflux builds container images on PR push",
        "2. ITS reserves ephemeral namespace",
        "3. bonfire deploy with --set-template-ref and --set-parameter",
        "4. Integration tests run",
        "5. Namespace released after tests"
      ]
    }
  },
  "agent": {
    "description": "Claude-powered agent configuration",
    "provider": "vertex",
    "model": "claude-sonnet-4-20250514",
    "vertex_model": "claude-sonnet-4-5@20250929",
    "max_tokens": 4096,
    "system_prompt": "You are a senior software engineer. Be direct, helpful, and use tools when available."
  },
  "slack": {
    "description": "Slack integration for autonomous agent",
    "auth": {
      "xoxc_token": "xoxc-YOUR-TOKEN-HERE",
      "d_cookie": "xoxd-YOUR-COOKIE-HERE",
      "workspace_id": "YOUR_WORKSPACE_ID",
      "host": "your-workspace.enterprise.slack.com"
    },
    "listener": {
      "poll_interval_min": 5,
      "poll_interval_max": 15,
      "watched_channels": ["D_YOUR_DM_CHANNEL", "C_YOUR_TEAM_CHANNEL"],
      "alert_channels": {
        "C_STAGE_ALERTS": {
          "name": "app-stage-alerts",
          "environment": "stage",
          "namespace": "your-app-stage",
          "cluster": "stage-cluster",
          "severity": "medium",
          "auto_investigate": true
        },
        "C_PROD_ALERTS": {
          "name": "app-prod-alerts",
          "environment": "production",
          "namespace": "your-app-prod",
          "cluster": "prod-cluster",
          "severity": "high",
          "auto_investigate": true
        }
      },
      "watched_keywords": ["help", "question", "urgent", "review", "alert"],
      "self_user_id": "U_YOUR_USER_ID",
      "self_dm_channel": "D_YOUR_DM_CHANNEL"
    },
    "response_rules": {
      "description": "Rules for when the agent should respond",
      "direct_messages": {
        "enabled": true,
        "description": "Always respond to DMs"
      },
      "channel_mentions": {
        "enabled": true,
        "description": "Only respond in channels when mentioned",
        "trigger_mentions": ["@your-bot-name", "@your-team"],
        "trigger_user_ids": [],
        "trigger_group_ids": []
      },
      "channel_keywords": {
        "enabled": false,
        "keywords": ["urgent", "help needed"]
      },
      "ignore_unmentioned": true,
      "blocked_channels": []
    },
    "rate_limiting": {
      "max_retries": 5,
      "base_backoff": 1.0
    },
    "user_classification": {
      "safe_list": {
        "description": "Teammates - respond freely",
        "user_ids": [],
        "user_names": [],
        "response_style": "casual",
        "auto_respond": true,
        "include_emojis": true
      },
      "concerned_list": {
        "description": "Managers - respond carefully",
        "user_ids": [],
        "user_names": [],
        "response_style": "formal",
        "auto_respond": false,
        "require_review": true,
        "include_emojis": false,
        "cc_notification": true
      },
      "unknown_list": {
        "description": "Everyone else",
        "response_style": "professional",
        "auto_respond": true,
        "include_emojis": true,
        "max_response_length": 500
      }
    },
    "response_templates": {
      "formal_greeting": "Hello {user_name},",
      "casual_greeting": "Hey {user_name}!",
      "professional_greeting": "Hi {user_name},",
      "formal_closing": "",
      "casual_closing": "",
      "professional_closing": "Let me know if you need anything else!"
    },
    "notifications": {
      "notify_on_concerned_message": true,
      "notification_channel": "",
      "notify_user_id": ""
    },
    "state_db_path": "./slack_state.db",
    "debug": false
  },
  "skill_hooks": {
    "description": "Event notifications during skill execution",
    "enabled": true,
    "rate_limiting": {
      "batch_window_seconds": 300,
      "max_per_author": 3,
      "description": "batch notifications per author within window"
    },
    "events": {
      "review_approved": {
        "description": "PR approved",
        "notify_author": true,
        "notify_channel": true,
        "template": "approved !{mr_id}"
      },
      "review_comment": {
        "description": "Feedback left on PR",
        "notify_author": true,
        "notify_channel": false,
        "template": "feedback on !{mr_id}: {issue_count} items"
      },
      "mr_created": {
        "description": "New MR opened",
        "notify_author": false,
        "notify_channel": true,
        "template": "new mr !{mr_id} for {issue_key}"
      },
      "pipeline_failed": {
        "description": "CI pipeline failed",
        "notify_author": true,
        "notify_channel": false,
        "template": "pipeline failed on !{mr_id}"
      },
      "release_started": {
        "description": "Release to prod initiated",
        "notify_author": false,
        "notify_channel": true,
        "template": "release started - {sha} going to prod"
      },
      "ephemeral_ready": {
        "description": "Ephemeral env deployed",
        "notify_author": true,
        "notify_channel": false,
        "template": "ephemeral env ready: {namespace}"
      }
    },
    "channels": {
      "team": "C_YOUR_TEAM_CHANNEL",
      "description": "Team channel for notifications"
    },
    "user_mapping": {
      "description": "Map usernames to Slack user IDs",
      "your_username": "U_YOUR_USER_ID"
    },
    "debug": {
      "enabled": false,
      "redirect_all_to_self": false,
      "self_user_id": "U_YOUR_USER_ID",
      "description": "When enabled, all notifications go to self_user_id"
    }
  },
  "google_calendar": {
    "enabled": false,
    "description": "Google Calendar integration for meetings",
    "config_dir": "~/.config/google-calendar",
    "credentials_file": "credentials.json",
    "token_file": "token.json",
    "timezone": "Europe/Dublin",
    "meeting_window": {
      "start_hour": 15,
      "end_hour": 19,
      "description": "Meetings only allowed between 3pm and 7pm"
    },
    "default_duration_minutes": 30,
    "duplicate_check": {
      "enabled": true,
      "days_back": 30,
      "days_ahead": 30
    },
    "availability_check": {
      "enabled": true,
      "days_ahead": 5,
      "skip_weekends": true
    },
    "auto_create_for_meeting_requests": false,
    "user_emails": {
      "description": "Map usernames to email addresses",
      "your_username": "you@example.com"
    },
    "setup_instructions": [
      "1. Go to https://console.cloud.google.com/",
      "2. Create or select a project",
      "3. Enable the Google Calendar API",
      "4. Go to APIs & Services > Credentials",
      "5. Create OAuth 2.0 credentials (Desktop app)",
      "6. Download and save as ~/.config/google-calendar/credentials.json",
      "7. Run google_calendar_status() to complete OAuth"
    ]
  },
  "gmail": {
    "enabled": false,
    "description": "Gmail integration for /coffee morning briefing",
    "uses_same_oauth": true,
    "oauth_note": "Uses same token as google_calendar - add Gmail API scopes",
    "required_scopes": [
      "https://www.googleapis.com/auth/gmail.readonly",
      "https://www.googleapis.com/auth/gmail.modify"
    ],
    "auto_archive": {
      "enabled": false,
      "exclude_labels": ["IMPORTANT", "STARRED"]
    },
    "categories": {
      "newsletters": ["newsletter", "digest", "weekly"],
      "notifications": ["noreply", "notification", "automated"],
      "important_domains": ["your-company.com"]
    },
    "max_emails_to_process": 50,
    "setup_instructions": [
      "1. Gmail uses the same OAuth as Google Calendar",
      "2. Go to Google Cloud Console > APIs & Services > Library",
      "3. Enable 'Gmail API'",
      "4. Go to OAuth consent screen > Edit App > Scopes",
      "5. Add gmail.readonly and gmail.modify scopes",
      "6. Delete ~/.config/google-calendar/token.json",
      "7. Run google_calendar_status() to re-authenticate"
    ]
  },
  "paths": {
    "kube_base": "/home/YOUR_USER/.kube",
    "docker_config": "/home/YOUR_USER/.docker/config.json",
    "container_auth": "/home/YOUR_USER/.config/containers/auth.json",
    "google_calendar_config": "/home/YOUR_USER/.config/google-calendar",
    "workspace_roots": [
      "/home/YOUR_USER/src",
      "/home/YOUR_USER/repos",
      "/home/YOUR_USER/projects"
    ]
  }
}
